# {{ ansible_managed }}

options {
  listen-on port 53 { {{ ansible_default_ipv4.address }}/24; };
  forwarders { 1.1.1.1;
               1.0.0.1;
             };
  tkey-gssapi-keytab "/var/lib/samba/bind-dns/dns.keytab";
  directory       "/var/named";
  dump-file       "/var/named/data/cache_dump.db";
  statistics-file "/var/named/data/named_stats.txt";
  memstatistics-file "/var/named/data/named_mem_stats.txt";
  allow-query { any; };
  allow-recursion { any; };
  allow-query-cache { any; };
  recursion yes;
  dnssec-enable no;
  dnssec-validation no;
  bindkeys-file "/etc/named.iscdlv.key";
  managed-keys-directory "/var/named/dynamic";
  pid-file "/run/named/named.pid";
  session-keyfile "/run/named/session.key";
  minimal-responses yes;
};
logging {
  channel default_debug {
  file "data/named.run";
  severity dynamic;
  };
};
zone "." IN {
  type hint;
  file "named.ca";
  };
include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";
dlz "{{ domaine }}" {
  database "dlopen /usr/lib64/samba/bind9/dlz_bind9_11.so";
  };
